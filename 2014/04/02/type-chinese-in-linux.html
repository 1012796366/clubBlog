<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><script type=text/javascript>var host="vjudge1.github.io";host==window.location.host&&"https:"!=window.location.protocol&&(window.location.protocol="https");</script><title>解决 Linux 和 Qt 的中文输入问题</title><meta name=description content="Linux 是中文输入问题最多的系统了，幸运的是，问题是可以解决的。"><link rel=stylesheet href="/css/main.css"><link rel=stylesheet type=text/css href="/css/font-awesome.min.css"><link rel=canonical href="https://vjudge1.github.io/2014/04/02/type-chinese-in-linux.html"><link type=application/atom+xml rel=alternate href=https://vjudge1.github.io/feed.xml><script type=text/javascript src=/js/jquery-1.11.3.min.js></script><script type=text/javascript src=/js/bootstrap.min.js></script><script type=text/javascript src=/js/index.js></script></head><body><header><nav class="navbar navbar-default"><div class=container><div class=navbar-header><button type=button class="navbar-toggle navbar-toggle-left collapsed" id=toggle-sidebar data-toggle=sidebar data-target=#sidebar-mobile><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href="/"><i class="fa fa-github-alt"></i> Unorz</a></div><div id=navbar class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href=/ data-toggle=tooltip data-placement=bottom title=Home><i class="fa fa-home"></i></a></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=true data-toggle=tooltip data-placement=bottom title=Categories><i class="fa fa-th-list"></i> <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href="/categories/?c=All"><span class=badge style=float:right>41</span> All</a></li><li class=divider></li><li class=dropdown-header>Lists</li><li><a href="/categories/?c=Others"><span class=badge style=float:right>8</span> Others</a></li><li><a href="/categories/?c=Linux"><span class=badge style=float:right>11</span> Linux</a></li><li><a href="/categories/?c=Maintainance"><span class=badge style=float:right>4</span> Maintainance</a></li><li><a href="/categories/?c=Mac"><span class=badge style=float:right>5</span> Mac</a></li><li><a href="/categories/?c=GitHub"><span class=badge style=float:right>4</span> GitHub</a></li><li><a href="/categories/?c=Arduino"><span class=badge style=float:right>1</span> Arduino</a></li><li><a href="/categories/?c=fun"><span class=badge style=float:right>2</span> fun</a></li><li><a href="/categories/?c=Web"><span class=badge style=float:right>6</span> Web</a></li><li><a href="/categories/?c=others"><span class=badge style=float:right>1</span> others</a></li><li><a href="/categories/?c=Ruby"><span class=badge style=float:right>1</span> Ruby</a></li><li><a href="/categories/?c=Programming"><span class=badge style=float:right>3</span> Programming</a></li><li><a href="/categories/?c=Fun"><span class=badge style=float:right>1</span> Fun</a></li></ul></li><li><a href=/tags/ data-toggle=tooltip data-placement=bottom title=Tags><i class="fa fa-tags"></i></a></li><li><a href=/archive/ data-toggle=tooltip data-placement=bottom title=Archive><i class="fa fa-archive"></i></a></li><li><a href=/about/ data-toggle=tooltip data-placement=bottom title=About><i class="fa fa-graduation-cap"></i></a></li><li><a href=https://github.com/vjudge1/vjudge1.github.io data-toggle=tooltip data-placement=bottom title="Source Code"><i class="fa fa-code"></i></a></li><li><a href=/feed.xml data-toggle=tooltip data-placement=bottom title=RSS><i class="fa fa-rss"></i></a></li></ul></div></div></nav></header><div class=jumbotron><div class=container><h1 class=post-title id=post-title><a href="/">解决 Linux 和 Qt 的中文输入问题</a></h1><p><span class="glyphicon glyphicon-calendar"></span> Apr 2, 2014 &nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-user"></span> vjudge1 &nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-th-list"></span> <a href="/categories/?c=Linux">Linux</a> &nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-tags"></span> &nbsp; <a href=/tags/#tag-中文>中文</a></p></div></div><div id=main class=container><div class=row><div class=col-md-8 role=main><article class=article><ul id=markdown-toc><li><a href=#section id=markdown-toc-section>输入法平台</a></li><li><a href=#section-1 id=markdown-toc-section-1>安装中州韵输入法</a></li><li><a href=#section-2 id=markdown-toc-section-2>安装搜狗拼音输入法</a><ul><li><a href=#ubuntu id=markdown-toc-ubuntu>Ubuntu</a></li><li><a href=#fedora- id=markdown-toc-fedora->Fedora 及其他</a></li></ul></li><li><a href=#qt- id=markdown-toc-qt->解决 Qt 的中文输入问题</a><ul><li><a href=#qt--1 id=markdown-toc-qt--1>Qt 程序</a></li><li><a href=#qt-creator id=markdown-toc-qt-creator>Qt Creator</a></li></ul></li></ul><p>Linux 是中文输入问题最多的系统了，幸运的是，问题是可以解决的。</p><div class="callout callout-primary"><h4 id=section>本文已更新 (2015 年 11 月)</h4><p>本文最开始是 2014 年 4 月写的，当时搜狗官方并没正式发布 Linux 版输入法。后来有了 Ubuntu 版，所以文章有些地方已经改了。</p></div><h1 id=section>输入法平台</h1><p>在 Linux 系统中主要有三种输入法平台——SCIM、iBus、fcitx。当然，也有其他的输入法，例如 fbterm 下的小小输入法。</p><p>SCIM 显得比较古老了，我们就不提了。</p><p>很多人会选择 fcitx，因为它用着比 iBus 舒服多了，此外，fcitx 里面有一个“搜狗输入法”！过去，Linux Deepin 和搜狗（貌似是非正式的）合作了一把，做了一个测试版的搜狗拼音输入法；后来搜狗和 UbuntuKylin 合作，于是推出了正式版。</p><p>一开始我只听说过搜狗，直到后来，发现了中州韵输入法——</p><h1 id=section-1>安装中州韵输入法</h1><p>中州韵（Rime）是一个开源的输入法框架，被誉为“神级输入法”。这个输入法在 Windows、Linux、Mac 系统中分别被称作“小狼毫”、“中州韵”和“鼠松管”。</p><p>这个输入法很好很强大，只不过没有图形界面的设置框，所以……既然敢用 Linux，那么小小的配置文件当然不算事儿了！</p><p>官网：<a href=http://rime.im>http://rime.im</a>。</p><p>Rime 既支持 iBus 又支持 fcitx，所以非常省事儿。不过输入法默认出来的是繁体中文，需要调成<s>残</s>简体中文。</p><h1 id=section-2>安装搜狗拼音输入法</h1><h2 id=ubuntu>Ubuntu</h2><p>使用原生 Ubuntu 的一定会主动换输入法，除非就想打双拼（iBus 拼音有 bug，不管选没选双拼，出来的都是双拼）。</p><p>过去搜狗官方并没有支持 Linux 系统，所以装起来比较麻烦。现在官方支持 Ubuntu，一切就很轻松了。</p><p>按照过去的方法，需要卸载 iBus，手动装 fcitx 而且要把该装的手动装好。现在——</p><div class="callout callout-danger"><h4 id=section>别手贱</h4><p>由于某些系统组件用到了 iBus，所以不要鲁莽地 apt-get remove ibus。如果你在敲命令的时候看到满屏幕要删除的包，那么赶快停止，否则……</p></div><ol><li>去<a href="http://pinyin.sogou.com/linux/">搜狗官方</a>下载安装包。点击“下载”之后官方会给出一个详细的安装步骤。由于软件包的依赖性，该装的东西会自动装好，无需人工干预。</li><li>如果原来默认输入法是 iBus，那么还需要切换一下。输入命令<code class=highlighter-rouge>im-switch</code>（其他系统可能叫<code class=highlighter-rouge>im-config</code>或<code class=highlighter-rouge>imsettings-switch</code>什么的），手动设置，把默认输入法改成 fcitx。</li><li>注销之后再登录，默认输入法会变成 fcitx。</li><li>如果想要其他输入法<ul><li><p>五笔输入法</p><div class=highlighter-rouge><pre class=highlight><code>  sudo apt-get install fcitx-table-wb fcitx-table-wubi-large
</code></pre></div></li><li><p>五笔拼音输入法</p><div class=highlighter-rouge><pre class=highlight><code>  sudo apt-get install fcitx-table-wbpy
</code></pre></div></li><li><p>还有一些输入法，比如 LaTeX 输入法 (输入数学符号)。可以自己到软件包管理器里找。</p></li></ul></li></ol><h2 id=fedora->Fedora 及其他</h2><p>以 Fedora 为例。</p><p>因为搜狗拼音输入法官方只支持 deb 系列系统，所以接下来只能手动安装。好在它是个输入法，装完之后就没有人打算把它卸载了。</p><ol><li><p>安装 fcitx 和必要的库：</p><p>sudo yum install fcitx fcitx-gtk2 fcitx-gtk3 fcitx-qt4 fcitx-qt5 fcitx-config-tool libidn opencc</p></li><li>使用 <code class=highlighter-rouge>imsettings-switch FCITX</code> 命令将输入法切换为 fcitx。</li><li>去<a href="http://pinyin.sogou.com/linux/">搜狗官方</a>下载安装包。不用理会网站的提示，反正我们自己也装不了。</li><li>将安装包中的 data.tar.xz 提取出来。</li><li><p>切换到 root 用户（以免后面出现权限问题），将 data.tar.xz 解压，并手动安装文件：</p><p>tar -xvf data.tar.xz chmod +x ./usr/bin/* cp -R etc usr /</p></li><li><p>其中库文件并没有被放到正确的位置上面，所以</p><div class=highlighter-rouge><pre class=highlight><code> cp -R /usr/lib/x86_64-linux-gnu/* /usr/lib64
</code></pre></div></li><li><p>清理刚才产生的临时文件</p><div class=highlighter-rouge><pre class=highlight><code> rm -R etc usr /usr/lib/x86_64-linux-gnu
</code></pre></div></li><li>如果没有什么异常，那么搜狗拼音输入法就已经装好了。可以用 <code class=highlighter-rouge>sogou-qimpanel</code> 等命令测试一下是否能正确运行。</li></ol><p>不过我在输入“sogou-qimpanel”时遇到提示，说缺少“libopencc.so.1”。我用 <code class=highlighter-rouge>ls /usr/lib64/libopencc*</code> 发现有一个 <code class=highlighter-rouge>libopencc.so.1.0.0</code>，所以只需要建立一个软链接：</p><div class=highlighter-rouge><pre class=highlight><code>sudo ln -s /usr/lib64/libopencc.so.1.0.0 /usr/lib64/libopencc.so.1
</code></pre></div><h1 id=qt->解决 Qt 的中文输入问题</h1><p>只讲 Ubuntu 的方法。其他系统思路一样。</p><h2 id=qt--1>Qt 程序</h2><p>对于旧版 Ubuntu (例如 Ubuntu 12.04)，打以下四行命令：</p><div class=highlighter-rouge><pre class=highlight><code>sudo add-apt-repository ppa:fcitx-team/nightly
sudo apt-get update
sudo apt-get dist-upgrade
sudo apt-get install libfcitx-qt5-0 fcitx-libs-qt fcitx-libs-qt5
</code></pre></div><p>新版 Ubuntu (14.04) 则是</p><div class=highlighter-rouge><pre class=highlight><code>sudo apt-get install libfcitx-qt5 fcitx-libs-qt fcitx-libs-qt5
</code></pre></div><p>现在中文输入法基本上就畅通无阻了。</p><h2 id=qt-creator>Qt Creator</h2><p>按照上面的配置，Qt4 的 Qt Creator 已经就可以正常敲汉字了，但是 Qt5 的 Qt Creator 还不行。</p><p>根本原因是你得把输入法插件送给 Qt Creator，它才能知道有输入法这个东西。iBus 已经送过去了，所以 iBus 不配置也能打字。而 fcitx 就不一样了。</p><p>装完<code class=highlighter-rouge>libfcitx-qt5</code>之后，电脑里会多一个文件</p><div class=highlighter-rouge><pre class=highlight><code>/usr/lib/x86_64-linux-gnu/qt5/plugin/platforminputcontexts/libfcitxplatforminputcontextplugin.so
</code></pre></div><p>这个文件名很长，但是你得记住，因为这个文件要被复制两次。</p><p>假设 Qt5 装到了 /opt/Qt5.2.1 里，你需要把这个文件复制到以下两个地方：</p><div class=highlighter-rouge><pre class=highlight><code>/opt/Qt5.2.1/Tools/QtCreator/bin/plugins/platforminputcontexts
/opt/Qt5.2.1/5.2.1/gcc_64/plugins/platforminputcontexts
</code></pre></div><p>第一个目录管的是 Qt Creator 的中文输入，第二个目录管的是 Qt 编译出来的程序的中文输入。</p><p>顺便提一句，正是因为 Telegram 官方的这俩目录干干净净的，所以 Telegram 中文输入无解，除非找个有插件的重新编译。</p></article><div class=text-right><ul class=sharelist><li><a href=# class=share data-target=weibo data-toggle=tooltip title="Share on Weibo"><i class="fa fa-weibo"></i></a></li><li><a href=# class=share data-target=linkedin data-toggle=tooltip title="Share on LinkedIn"><i class="fa fa-linkedin-square"></i></a></li><li><a href=# class=share data-target=facebook data-toggle=tooltip title="Share on Facebook"><i class="fa fa-facebook-square"></i></a></li><li><a href=# class=share data-target=twitter data-toggle=tooltip title="Share on Twitter"><i class="fa fa-twitter-square"></i></a></li><li><span class=text-muted>Share this post:</span></li></ul><script src=/js/share.js></script></div><br class="clear"><div class="post-area post comment"><div id=disqus_thread></div><script type=text/javascript>var disqus_shortname="vjudge1";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript></div><br class="clear"></div><div id=content class="col-sm-4 hidden-xs hidden-sm"><ul class=nav id=content-ul></ul></div></div></div><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js></script><script type=text/javascript>anchors.options.placement="left",anchors.add("article h1,h2,h3,h4");</script><div id=top data-toggle=tooltip data-placement=left title="Back to top"><a href=javascript:;><div class=arrow></div><div class=stick></div></a></div><footer class=site-footer id=footer><div class=container><ol class=footer-list><li><a href="/about/">About</a></li><li><a href="https://vjudge1.github.io/kuso/sos/">让我帮你百度一下</a></li><li><a href="https://wikitrans-1245.appspot.com/">wikitrans</a></li></ol><ol class=social-media-list><li><a href=mailto:vjudge404@gmail.com data-toggle=tooltip data-placement=top title=Email><i class="fa fa-envelope"></i></a></li><li><a href=https://github.com/vjudge1 data-toggle=tooltip data-placement=top title=GitHub><i class="fa fa-github"></i></a></li><li><a href=https://twitter.com/vjudge404 data-toggle=tooltip data-placement=top title=Twitter><i class="fa fa-twitter"></i></a></li><li><a href=https://www.facebook.com/vjudge404 data-toggle=tooltip data-placement=top title=Facebook><i class="fa fa-facebook"></i></a></li></ol><br class="clear"><div class=footnote>&copy; 2015 vjudge1</div></div></footer><div id=sidebar-mobile class=sidebar><div class=sb-mask></div><div class=sb-body><div class=sb-title><form action=/search/ id=sb_searchform><input type=search placeholder=Search class=sb-searchbox name="s"> <a href=javascript:document.forms.sb_searchform.submit(); class=sb-searchbutton><i class="fa fa-search"></i></a></form></div><div class=sb-container><div class=sb-content id=sb-content><div id=contents-sidebar class=contents style=display:none><h4 class=page-header><i class="fa fa-list-ol"></i> Contents</h4><ul class=contents-list id=contents-sidebar-ul></ul></div><h4 class=page-header><i class="fa fa-th-list"></i> Categories</h4><div class=categories-list><a class=item href="/categories/?c=All" data-cate=All>All <span class=badge>41</span></a> <a class=item href="/categories/?c=Others" data-cate=Others>Others <span class=badge>8</span></a> <a class=item href="/categories/?c=Linux" data-cate=Linux>Linux <span class=badge>11</span></a> <a class=item href="/categories/?c=Maintainance" data-cate=Maintainance>Maintainance <span class=badge>4</span></a> <a class=item href="/categories/?c=Mac" data-cate=Mac>Mac <span class=badge>5</span></a> <a class=item href="/categories/?c=GitHub" data-cate=GitHub>GitHub <span class=badge>4</span></a> <a class=item href="/categories/?c=Arduino" data-cate=Arduino>Arduino <span class=badge>1</span></a> <a class=item href="/categories/?c=fun" data-cate=fun>fun <span class=badge>2</span></a> <a class=item href="/categories/?c=Web" data-cate=Web>Web <span class=badge>6</span></a> <a class=item href="/categories/?c=others" data-cate=others>others <span class=badge>1</span></a> <a class=item href="/categories/?c=Ruby" data-cate=Ruby>Ruby <span class=badge>1</span></a> <a class=item href="/categories/?c=Programming" data-cate=Programming>Programming <span class=badge>3</span></a> <a class=item href="/categories/?c=Fun" data-cate=Fun>Fun <span class=badge>1</span></a></div><h4 class=page-header><i class="fa fa-tags"></i> Tags</h4><div class=tags><ul class=tags-list><li><a href=/tags/#tag-Linux class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Linux <sup>2</sup></a></li><li><a href=/tags/#tag-中文 class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>中文 <sup>1</sup></a></li><li><a href=/tags/#tag-Hackintosh class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Hackintosh <sup>3</sup></a></li><li><a href=/tags/#tag-UEFI class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>UEFI <sup>2</sup></a></li><li><a href=/tags/#tag-单片机 class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>单片机 <sup>1</sup></a></li><li><a href=/tags/#tag-Jekyll class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Jekyll <sup>2</sup></a></li><li><a href=/tags/#tag-GitHub class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>GitHub <sup>3</sup></a></li><li><a href=/tags/#tag-Scripting class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Scripting <sup>2</sup></a></li><li><a href=/tags/#tag-Arduino class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Arduino <sup>1</sup></a></li><li><a href=/tags/#tag-Wireless class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Wireless <sup>2</sup></a></li><li><a href=/tags/#tag-hostapd class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>hostapd <sup>2</sup></a></li><li><a href=/tags/#tag-Windows class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Windows <sup>1</sup></a></li><li><a href=/tags/#tag-LaTeX class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>LaTeX <sup>1</sup></a></li><li><a href=/tags/#tag-Ubuntu class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Ubuntu <sup>1</sup></a></li><li><a href=/tags/#tag-教务系统 class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>教务系统 <sup>1</sup></a></li><li><a href=/tags/#tag-Mac class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Mac <sup>1</sup></a></li><li><a href=/tags/#tag-NTFS class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>NTFS <sup>1</sup></a></li><li><a href=/tags/#tag-Request class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Request <sup>1</sup></a></li><li><a href=/tags/#tag-C class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>C <sup>2</sup></a></li><li><a href=/tags/#tag-CGI class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>CGI <sup>2</sup></a></li><li><a href=/tags/#tag-Session class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Session <sup>1</sup></a></li><li><a href=/tags/#tag-Synergy class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Synergy <sup>1</sup></a></li><li><a href=/tags/#tag-Rails class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Rails <sup>1</sup></a></li><li><a href=/tags/#tag-Dash class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>Dash <sup>1</sup></a></li><li><a href=/tags/#tag-API class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>API <sup>1</sup></a></li><li><a href=/tags/#tag-wine class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>wine <sup>1</sup></a></li><li><a href=/tags/#tag-插件 class="btn btn-dark" data-toggle=sidebar data-target=#sidebar-mobile>插件 <sup>3</sup></a></li></ul></div></div></div></div></div><script type=text/javascript src=/js/sidebar.js></script><div style=display:none><script src="//s95.cnzz.com/z_stat.php?id=1256463916&web_id=1256463916"></script></div></body></html>